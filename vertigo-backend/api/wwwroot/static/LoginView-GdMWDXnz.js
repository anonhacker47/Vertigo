import{ay as U,aN as V,az as n,aO as L,o as d,c as u,a as s,l as b,W as f,aA as T,au as C,$ as v,aW as x,T as R,k as B,S as w,u as D,a2 as N,aD as z,aC as M,r as A,F as E,j as P,aX as W,aY as y,aB as F}from"./index-DN0zppBt.js";import{S as _}from"./SeriesService-Cc07SvbQ.js";const O={class:"transform-class -skew-y-6 -translate-y-20 backdrop-blur-lg backdrop-brightness-50"},X=["src"],j={class:"w-fit h-fit card top-0 right-0 left-0 bottom-0 m-auto absolute z-20 w-md rounded-xl shadow-md bg-base-100"},G={class:"card-body mx-8 mx-4"},H={class:"form-control"},Y={class:"form-control"},$={key:0,class:"error py-3 text-red-500"},q={class:"text-sm font-light text-gray-500 dark:text-gray-400 mt-4"},J=U({__name:"LoginView",setup(K){const r=V(),k=M(),l=n(""),c=n(""),m=n(""),g=n([]),i=n(!1);async function h(){try{const t=await y.login(c.value,m.value);if(r.addToken(t.data.access_token),localStorage.getItem("token")){const e=r.getTokenHeader();try{const a=await y.getUser();r.addUser(a.data)}catch(a){l.value=a}k.push("dashboard")}else r.isUserLoggedIn=!1}catch(t){l.value=S(t)}}function S(t){return t.response&&t.response.data&&t.response.data.message?t.response.data.message:"An unknown error occurred. Please try again."}const I=async()=>{try{const t=await _.getSeriesThumbBg();if(t.data.length>0){const a=t.data.map(async o=>_.getImagebyId(o));g.value=await Promise.all(a),i.value=!1}else i.value=!0}catch(t){console.error("Error fetching images:",t)}};return L(()=>{I()}),(t,e)=>{const a=A("RouterLink");return d(),u("div",{class:"background-container bg-cover bg-no-repeat",style:N({backgroundImage:i.value?"url("+z(W)+")":""})},[s("div",{class:D(["background-images",i.value?"bg-none":"bg-base-100"])},[s("div",O,[b(T,{"enter-active-class":"animate__animated animate__flipInX","leave-active-class":"animate__animated animate__fadeOut"},{default:f(()=>[(d(!0),u(E,null,P(g.value,(o,p)=>(d(),u("div",{key:p},[s("img",{src:o,class:"background-image",alt:"comicbooks tile backdrop"},null,8,X)]))),128))]),_:1})]),s("div",j,[s("div",G,[e[7]||(e[7]=s("h1",{class:"text-xl text-center font-bold card-title leading-tight tracking-tight md:text-2xl mb-2 text-white"}," Sign in to your account ",-1)),s("form",{onSubmit:C(h,["prevent"]),class:"flex gap-4 flex-col"},[s("div",H,[e[2]||(e[2]=s("label",{for:"username",class:"label"},[s("span",{class:"label-text text-white"},"Username")],-1)),v(s("input",{type:"text",placeholder:"Username","onUpdate:modelValue":e[0]||(e[0]=o=>c.value=o),id:"username",class:"input input-bordered w-full"},null,512),[[x,c.value]])]),s("div",Y,[e[3]||(e[3]=s("label",{for:"password",class:"label"},[s("span",{class:"label-text text-white"},"Password")],-1)),v(s("input",{type:"password","onUpdate:modelValue":e[1]||(e[1]=o=>m.value=o),id:"password",class:"input input-bordered w-full"},null,512),[[x,m.value]])]),l.value?(d(),u("div",$,R(l.value),1)):B("",!0),e[4]||(e[4]=s("button",{type:"submit",class:"btn btn-primary mt-4 w-full"},"Login",-1))],32),s("p",q,[e[6]||(e[6]=w(" Donâ€™t have an account yet? ")),b(a,{to:"/register",class:"text-blue-500 underline"},{default:f(()=>e[5]||(e[5]=[w("Sign up")])),_:1})])])])],2)],4)}}}),ee=F(J,[["__scopeId","data-v-9b358cda"]]);export{ee as default};
