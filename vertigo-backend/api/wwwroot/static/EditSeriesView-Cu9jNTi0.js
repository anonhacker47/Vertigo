import{ay as S,aF as U,aQ as h,o as V,c as y,a as t,$ as m,aW as g,aZ as k,l as d,au as $,k as C,aC as x,az as f,aO as D,a$ as j,aV as N,aB as M}from"./index-DN0zppBt.js";import{S as _}from"./SeriesService-Cc07SvbQ.js";import{_ as v,a as w}from"./MultiSelectCombobox.vue_vue_type_script_setup_true_lang-BC2O8HmQ.js";const O={key:0,class:"card h-full w-full md:w-2/3 flex gap-6 md:gap-10 shadow-2xl bg-base-100 justify-between p-8"},B={class:"flex flex-col w-full md:flex-row gap-8 md:gap-20 justify-around"},E={class:"form-control w-full"},F={class:"form-control w-full"},L={class:"form-control w-full"},R={class:"flex flex-col md:flex-row gap-8 md:gap-20 justify-around"},A={class:"form-control w-full"},J={class:"form-control w-full"},P={class:"form-control w-full"},T={class:"flex flex-col md:flex-row gap-20 justify-around"},q={class:"form-control w-full"},z={class:"flex flex-col md:flex-row gap-16 justify-around"},G={class:"form-control w-full"},H={class:"form-control w-full"},K=["disabled"],Q=S({__name:"EditSeriesForm",props:{modelValue:{},showIssueSection:{type:Boolean}},emits:["update:modelValue","updateSeries"],setup(b,{emit:n}){x();const u=b,c=n,a=U({...u.modelValue});h(a,r=>{const{thumbnail:l,...e}=r;c("update:modelValue",{...e,thumbnail:u.modelValue.thumbnail})},{deep:!0}),h(()=>u.modelValue,r=>{Object.assign(a,r)},{deep:!0});const p=()=>{c("updateSeries")};return(r,l)=>r.showIssueSection?C("",!0):(V(),y("div",O,[t("div",B,[t("div",E,[m(t("input",{type:"text",placeholder:"Series Name","onUpdate:modelValue":l[0]||(l[0]=e=>a.title=e),class:"input w-full input-bordered",required:""},null,512),[[g,a.title]])]),t("div",F,[m(t("select",{class:"select w-full select-primary","onUpdate:modelValue":l[1]||(l[1]=e=>a.series_format=e),required:""},l[8]||(l[8]=[t("option",{disabled:"",value:""},"Pick Format",-1),t("option",null,"Single Issues",-1),t("option",null,"Trade Paperback",-1),t("option",null,"Hard Cover",-1),t("option",null,"Omnibus",-1),t("option",null,"Absolute Edition",-1),t("option",null,"Manga",-1)]),512),[[k,a.series_format]])]),t("div",L,[d(v,{modelValue:a.publisher,"onUpdate:modelValue":l[2]||(l[2]=e=>a.publisher=e),field:"publisher",placeholder:"Publisher"},null,8,["modelValue"])])]),t("div",R,[t("div",A,[d(w,{modelValue:a.genre,"onUpdate:modelValue":l[3]||(l[3]=e=>a.genre=e),field:"genre",placeholder:"Genre"},null,8,["modelValue"])]),t("div",J,[d(v,{modelValue:a.main_character,"onUpdate:modelValue":l[4]||(l[4]=e=>a.main_character=e),field:"main_character",placeholder:"Main Character/ Team"},null,8,["modelValue"])]),t("div",P,[d(w,{modelValue:a.creator,"onUpdate:modelValue":l[5]||(l[5]=e=>a.creator=e),field:"creator",placeholder:"Creators"},null,8,["modelValue"])])]),t("div",T,[t("div",q,[m(t("textarea",{class:"textarea textarea-bordered",placeholder:"Summary","onUpdate:modelValue":l[6]||(l[6]=e=>a.description=e)},null,512),[[g,a.description]])])]),t("div",z,[t("div",G,[t("button",{type:"button",onClick:l[7]||(l[7]=(...e)=>r.$router.back&&r.$router.back(...e)),class:"btn btn-danger"}," Cancel ")]),t("div",H,[t("button",{onClick:$(p,["prevent"]),disabled:!a.title||!a.series_format,class:"btn btn-primary rounded"}," Save Details ",8,K)])])]))}}),W={autocomplete:"on",class:"z-0 flex items-center justify-evenly flex-1 p-4 gap-6 md:gap-4 md:flex-row flex-col"},Z={class:"w-[24rem] h-[38rem]"},X=S({__name:"EditSeriesView",setup(b){const n=f(new URL("/static/dummy-DJ5LijKr.webp",import.meta.url).href),u=x(),c=N(),a=Number(c.params.Id),p=f(!1);async function r(){try{const o=await _.getSeriesbyId(a);e.value={...o},console.log(e),n.value=`${_.getImagebyId(a)}?t=${Date.now()}`}catch(o){console.log(o)}}async function l(){try{const o=new FormData,s=e.value;o.append("title",s.title||""),o.append("description",s.description||""),o.append("series_format",s.series_format||""),o.append("issue_count",String(s.issue_count||0)),o.append("read_count",String(s.read_count||0)),o.append("owned_count",String(s.owned_count||0)),o.append("main_character",s.main_character||""),o.append("genre",JSON.stringify(s.genre||[])),o.append("creator",JSON.stringify(s.creator||[])),o.append("publisher",s.publisher&&typeof s.publisher=="string"?s.publisher:Array.isArray(s.publisher)?s.publisher[0]:""),e.value.thumbnail?(console.log(e.value.thumbnail),o.append("thumbnail",e.value.thumbnail)):console.log("No thumbnail provided.");const i=await _.updateSeries(a,o);u.push({name:"SeriesDetail",params:{Id:String(i.data.id),Link:i.data.link}})}catch(o){console.error("Update error:",o)}}const e=f({title:"",creator:[],description:"",genre:[],main_character:"",series_format:"",issue_count:1,thumbnail:"",publisher:"",read_count:0,owned_count:0});D(()=>{r()}),h(n,o=>{console.log("SeriesData changed:",o)});function I(o){e.value.thumbnail=o,o instanceof File?n.value=URL.createObjectURL(o):typeof o=="string"&&(n.value=o),console.log("Image Changed:",e.value.thumbnail)}return(o,s)=>(V(),y("form",W,[t("div",Z,[d(j,{modelValue:n.value,"onUpdate:modelValue":s[0]||(s[0]=i=>n.value=i),onImageChange:I},null,8,["modelValue"])]),d(Q,{modelValue:e.value,"onUpdate:modelValue":s[1]||(s[1]=i=>e.value=i),showIssueSection:p.value,onUpdateSeries:l},null,8,["modelValue","showIssueSection"])]))}}),te=M(X,[["__scopeId","data-v-000e6c05"]]);export{te as default};
